{
  "name": "PEARL",
  "scopeName": "source.pearl",
  "fileTypes": [
    "p",
    "P"
  ],
  "patterns": [
    { "include": "#strings" },
    { "include": "#comments" },
    { "include": "#numbers" },
    { "include": "#constructs" },
    { "include": "#labels" },
    { "include": "#calls" },
    { "include": "#gotos" },
    { "include": "#taskoperations" },
    { "include": "#semaoperations" },
    { "include": "#boltoperations" },
    { "include": "#operators" },
    { "include": "#keywords" },
    { "include": "#types" },
    { "include": "#constants" }
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.line.exclamation.pearl",
          "match": "!.*$"
        },
        {
          "name": "comment.block.pearl",
          "begin": "/\\*",
          "end": "\\*/"
        }
      ]
    },

    "strings": {
      "patterns": [
        {
          "name": "string.quoted.single.pearl",
          "begin": "'",
          "end": "'",
          "patterns": [
            {
              "name": "constant.character.escape.pearl",
              "match": "''"
            }
          ]
        },
        {
          "name": "string.quoted.double.pearl",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            {
              "name": "constant.character.escape.pearl",
              "match": "\\\\."
            }
          ]
        }
      ]
    },

    "numbers": {
        "patterns": [
            {
            "name": "constant.numeric.clock.pearl",
            "match": "\\b\\d+:\\d{1,2}:\\d+(?:\\.\\d+)?\\b"
            },
            {
            "name": "constant.numeric.duration.pearl",
            "match": "\\b(?:\\d+\\s+HRS(?:\\s+\\d+\\s+MIN)?(?:\\s+(?:\\d+(?:\\.\\d+)?|\\.\\d+)\\s+SEC)?|\\d+\\s+MIN(?:\\s+(?:\\d+(?:\\.\\d+)?|\\.\\d+)\\s+SEC)?|(?:\\d+(?:\\.\\d+)?|\\.\\d+)\\s+SEC)\\b"
            },
            {
            "name": "constant.numeric.bitstring.pearl",
            "match": "'(?:[01]+'B1?|[0-3]+'B2|[0-7]+'B3|[0-9A-F]+'B4)"
            },
            {
            "name": "constant.numeric.float.pearl",
            "match": "\\b(?:\\d+\\.\\d*|\\d*\\.\\d+)(?:E[+-]?\\d+)?(?:\\(\\d+\\))?|\\d+E[+-]?\\d+(?:\\(\\d+\\))?\\b"
            },
            {
            "name": "constant.numeric.integer.pearl",
            "match": "\\b\\d+(?:\\(\\d+\\))?\\b"
            }
        ]
    },

    "constructs": {
      "patterns": [
        {
          "name": "meta.declaration.module.pearl",
          "match": "^\\s*(SHELLMODULE|MODULE)\\s+([A-Za-z][A-Za-z0-9_]*)",
          "captures": {
            "1": { "name": "keyword.declaration.pearl" },
            "2": { "name": "entity.name.function.module.pearl" }
          }
        },
        {
          "name": "meta.declaration.task.pearl",
          "match": "^\\s*(TASK)\\s+([A-Za-z][A-Za-z0-9_]*)",
          "captures": {
            "1": { "name": "keyword.declaration.pearl" },
            "2": { "name": "entity.name.function.task.pearl" }
          }
        },
        {
          "name": "meta.declaration.proc.pearl",
          "match": "^\\s*(PROC)\\s+([A-Za-z][A-Za-z0-9_]*)",
          "captures": {
            "1": { "name": "keyword.declaration.pearl" },
            "2": { "name": "entity.name.function.proc.pearl" }
          }
        }
      ]
    },

    "labels": {
      "patterns": [
        {
          "name": "meta.label.pearl",
          "match": "^\\s*([A-Za-z][A-Za-z0-9_]*)\\s*:",
          "captures": {
            "1": { "name": "entity.name.function.label.pearl" }
          }
        }
      ]
    },

    "gotos": {
      "patterns": [
        {
          "name": "meta.goto.pearl",
          "match": "\\b(GOTO)\\s+([A-Za-z][A-Za-z0-9_]*)",
          "captures": {
            "1": { "name": "keyword.other.goto.pearl" },
            "2": { "name": "entity.name.function.label.pearl" }
          }
        }
      ]
    },

    "calls": {
      "patterns": [
        {
          "name": "meta.function-call.pearl",
          "match": "\\b(CALL)\\s+([A-Za-z][A-Za-z0-9_]*)",
          "captures": {
            "1": { "name": "keyword.other.call.pearl" },
            "2": { "name": "entity.name.function.labelpearl" }
          }
        }
      ]
    },

    "taskoperations": {
      "patterns": [
        {
          "name": "meta.function-call.pearl",
          "match": "\\b(ACTIVATE|TERMINATE|SUSPEND|CONTINUE|PREVENT)\\b",
          "captures": {
            "1": { "name": "keyword.other.call.pearl" },
            "2": { "name": "entity.name.function.labelpearl" }
          }
        }
      ]
    },

    "semaoperations": {
      "patterns": [
        {
          "name": "meta.function-call.sema.pearl",
          "match": "\\b(REQUEST|RELEASE)\\s+([A-Za-z][A-Za-z0-9_]*)",
          "captures": {
            "1": { "name": "keyword.other.semaop.pearl" },
            "2": { "name": "storage.type.pearl" }
          }
        }
      ]
    },

    "boltoperations": {
      "patterns": [
        {
          "name": "meta.function-call.bolt.pearl",
          "match": "\\b(ENTER|LEAVE|RESERVE|FREE)\\s+([A-Za-z][A-Za-z0-9_]*)",
          "captures": {
            "1": { "name": "keyword.other.call.pearl" },
            "2": { "name": "storage.type.pearl" }
          }
        }
      ]
    },

    "operators": {
      "patterns": [
        {
          "name": "keyword.operator.logical.pearl",
          "match": "\\b(OR|AND|NOT)\\b"
        },
        {
          "name": "keyword.operator.comparator.pearl",
          "match": "\\b(==|/=|<|<=|>|>=|\\*\\*|LT|GT|EQ|NE|LE|GE)\\b"
        },
        {
          "name": "keyword.operator.assign.pearl",
          "match": "\\b(:=|=)\\b"
        },
        {
          "name": "keyword.operator.comparatorref.pearl",
          "match": "\\b(IS|ISNT)\\b"
        },
        {
          "name": "keyword.operator.other.pearl",
          "match": "\\b(<>|><|CSHIFT|CAT)\\b"
        },
        {
          "name": "keyword.operator.fixed.pearl",
          "match": "\\b(REM|FIT)\\b"
        },
        {
          "name": "keyword.operator.conversion.pearl",
          "match": "\\b(TOFIXED|TOCHAR|TOBIT)\\b"
        }

      ]
    },

    "keywords": {
      "patterns": [
        {
          "name": "keyword.declaration.pearl",
          "match": "\\b(MODULE|MODEND|SYSTEM|PROBLEM|TASK|PROC|SPC|SPECIFY|DCL|TYPE|SEMA|SEMAPHORE|BOLT|INTERRUPT|IRPT|SIGNAL|DATION|REF|OPERATOR|PRECEDENCE|ENTRY|MAIN|GLOBAL|RESIDENT|REENTRANT|INITIAL|INIT|INV|VOID)\\b"
        },
        {
          "name": "keyword.control.pearl",
          "match": "\\b(IF|THEN|ELSE|FIN|CASE|ALT|OUT|FOR|FROM|BY|TO|WHILE|REPEAT|EXIT|GOTO|RETURN|BEGIN|END|LEAVE)\\b"
        },
        {
          "name": "keyword.other.realtime.pearl",
          "match": "\\b(ACTIVATE|TERMINATE|SUSPEND|CONTINUE|RESUME|PREVENT|REQUEST|RELEASE|ENTER|FREE|RESERVE|ENABLE|DISABLE|TRIGGER|ON|INDUCE|PRIO|PRIORITY|AT|AFTER|WHEN|ALL|EVERY|UNTIL|DURING)\\b"
        },
        {
          "name": "keyword.other.io.pearl",
          "match": "\\b(OPEN|CLOSE|READ|WRITE|GET|PUT|SEND|TAKE|CONVERT|RST|IDF|CAN|PRM|OLD|NEW|ANY|POS|ADV|SOP|LIST)\\b"
        },
        {
          "name": "keyword.other.pearl",
          "match": "\\b(NIL)\\b"
        }
      ]
    },

    "types": {
      "patterns": [
        {
          "name": "storage.type.pearl",
          "match": "\\b(FIXED|FLOAT|BIT|CHAR|CHARACTER|CLOCK|DURATION|STRUCT|SEMA|SEMAPHORE|BOLT|REF|TYPE|VOID)\\b"
        }
      ]
    },

    "constants": {
      "patterns": [
        {
          "name": "constant.language.pearl",
          "match": "\\b(TRUE|FALSE|ON|OFF|NOW|DATE)\\b"
        }
      ]
    }
  }
}
